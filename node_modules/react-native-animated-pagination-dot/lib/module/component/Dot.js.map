{"version":3,"sources":["Dot.tsx"],"names":["React","useEffect","useMemo","useState","Animated","usePrevious","EmptyDot","getDotStyle","Dot","props","animVal","Value","animate","setAnimate","type","setType","idx","curPage","maxPage","prevType","nextType","nextAnimate","size","opacity","setValue","timing","toValue","duration","useNativeDriver","start","animStyle","interpolate","inputRange","outputRange","sizeRatio","width","height","borderRadius","backgroundColor","activeColor","margin"],"mappings":"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","sourcesContent":["/**\n *\n * Created by rouge on 11/09/2019.\n * Converted to Typescript on 14/07/2020.\n * Converted to Functional component. on 21/09/2021\n */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Animated } from 'react-native';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport EmptyDot from './EmptyDot';\nimport { getDotStyle } from '../util/DotUtils';\n\nconst Dot: React.FC<{\n  idx: number;\n  curPage: number;\n  maxPage: number;\n  activeColor: string;\n  sizeRatio: number;\n}> = (props) => {\n  const [animVal] = useState(new Animated.Value(0));\n  const [animate, setAnimate] = useState(false);\n  const [type, setType] = useState(() =>\n    getDotStyle({\n      idx: props.idx,\n      curPage: props.curPage,\n      maxPage: props.maxPage,\n    })\n  );\n  const prevType = usePrevious(type);\n\n  useEffect(() => {\n    const nextType = getDotStyle({\n      idx: props.idx,\n      curPage: props.curPage,\n      maxPage: props.maxPage,\n    });\n\n    const nextAnimate =\n      nextType.size !== (prevType?.size || 3) ||\n      nextType.opacity !== (prevType?.opacity || 0.2);\n\n    setType(nextType);\n    setAnimate(nextAnimate);\n  }, [\n    prevType?.opacity,\n    prevType?.size,\n    props.curPage,\n    props.idx,\n    props.maxPage,\n  ]);\n\n  useEffect(() => {\n    if (!animate) return;\n\n    animVal.setValue(0);\n    Animated.timing(animVal, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: false,\n    }).start();\n  }, [animVal, animate, prevType, type]);\n\n  const animStyle = useMemo(() => {\n    const size = animVal.interpolate({\n      inputRange: [0, 1],\n      outputRange: [\n        (prevType?.size || 3) * props.sizeRatio,\n        type.size * props.sizeRatio,\n      ],\n    });\n    return {\n      width: size,\n      height: size,\n      borderRadius: animVal.interpolate({\n        inputRange: [0, 1],\n        outputRange: [\n          (prevType?.size || 3) * props.sizeRatio * 0.5,\n          type.size * props.sizeRatio * 0.5,\n        ],\n      }),\n      opacity: animVal.interpolate({\n        inputRange: [0, 1],\n        outputRange: [prevType?.opacity || 0.2, type.opacity],\n      }),\n    };\n  }, [\n    animVal,\n    prevType?.opacity,\n    prevType?.size,\n    props.sizeRatio,\n    type.opacity,\n    type.size,\n  ]);\n\n  if (props.curPage < 3) {\n    if (props.idx >= 5) return <EmptyDot sizeRatio={props.sizeRatio} />;\n  } else if (props.curPage < 4) {\n    if (props.idx > 5) return <EmptyDot sizeRatio={props.sizeRatio} />;\n  }\n\n  return (\n    <Animated.View\n      style={[\n        {\n          backgroundColor: props.activeColor,\n          margin: 3 * props.sizeRatio,\n        },\n        animStyle,\n      ]}\n    />\n  );\n};\n\nexport default Dot;\n"]}